(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Chat~ChatTop"],{"0544d":function(e,t,o){"use strict";o("e0a6")},"18f4":function(e,t,o){},"1ebf":function(e,t,o){},"69e9":function(e,t,o){"use strict";o("18f4")},7121:function(e,t,o){e.exports=o.p+"static/img/open-zh.9e56c214.png"},"7a7c":function(e,t,o){e.exports=o.p+"static/img/open-en.a4b467ff.png"},"7dea":function(e,t,o){},"861a":function(e,t,o){},"98ca":function(e,t,o){"use strict";o("1ebf")},b04f:function(e,t,o){"use strict";var n=o("7a23"),i={class:"popup-title"};function c(e,t,o,c,a,s){var r=this,l=Object(n["resolveComponent"])("van-radio"),u=Object(n["resolveComponent"])("van-radio-group"),d=Object(n["resolveComponent"])("van-field"),m=Object(n["resolveComponent"])("van-datetime-picker"),p=Object(n["resolveComponent"])("van-popup"),b=Object(n["resolveComponent"])("van-button"),h=Object(n["resolveComponent"])("van-form");return Object(n["openBlock"])(),Object(n["createBlock"])(p,{show:s.dialogVisible,"onUpdate:show":t[5]||(t[5]=function(e){return s.dialogVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",i,Object(n["toDisplayString"])(e.$t("banTimeLimitSetting")),1),Object(n["createVNode"])(h,{class:"popup-content",onSubmit:s.confirmSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{modelValue:a.checked,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.checked=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{class:"mb_10",name:2},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("permanentBan")),1)]})),_:1}),Object(n["createVNode"])(l,{class:"mb_10",name:1},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("banUntil")),1)]})),_:1})]})),_:1},8,["modelValue"]),1===a.checked?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,modelValue:s.content,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.content=e}),class:"b-filed mb_10","is-link":"",readonly:"",name:"datetimePicker",label:"",placeholder:e.$t("selectTime"),rules:[{required:!0,message:r.$t("pSelectTime")}],onClick:t[2]||(t[2]=function(e){return a.showPicker=!0})},null,8,["modelValue","placeholder","rules"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(p,{show:a.showPicker,"onUpdate:show":t[4]||(t[4]=function(e){return a.showPicker=e}),teleport:"#app",position:"bottom"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"datetime","min-date":a.minDate,onConfirm:s.onConfirm,onCancel:t[3]||(t[3]=function(e){return a.showPicker=!1})},null,8,["min-date","onConfirm"])]})),_:1},8,["show"]),Object(n["createVNode"])(b,{class:"form-submit",block:"",round:"","native-type":"submit",type:"primary",loading:a.loading},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1},8,["loading"])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var a={name:"Mute",props:{visible:Boolean},emits:["update:visible","onSubmit"],data:function(){return{time:"",checked:2,loading:!1,placeholder:this.$t("pSelectBanExpirationTime"),showPicker:!1,minDate:new Date}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},content:function(){return this.time?this.$f.formatDate(this.time,"YYYY-MM-DD HH:mm"):""}},watch:{},methods:{onConfirm:function(e){this.time=Date.parse(e)/1e3,this.showPicker=!1},confirmSubmit:function(){var e={user_status:this.checked};1===this.checked&&(e.banned_expired=this.time),this.$emit("onSubmit",e)}}},s=(o("0544d"),o("6b0d")),r=o.n(s);const l=r()(a,[["render",c],["__scopeId","data-v-32a8ad0a"]]);t["a"]=l},c06c:function(e,t,o){"use strict";o("7dea")},c1f5:function(e,t,o){e.exports=o.p+"static/img/wallet.349b489d.svg"},da9c:function(e,t,o){"use strict";o("861a")},de8e:function(e,t,o){"use strict";o("fb6a");var n=o("7a23"),i=function(e){return Object(n["pushScopeId"])("data-v-672acc00"),e=e(),Object(n["popScopeId"])(),e},c={key:0,class:"chat-date"},a={style:{position:"relative",width:"0.8rem",height:"0.8rem"}},s={key:2,class:"icon-svg icon-renzheng",style:{"margin-left":"0.1rem"},"aria-hidden":"true"},r=i((function(){return Object(n["createElementVNode"])("use",{"xlink:href":"#icon-renzheng"},null,-1)})),l=[r],u={class:"chat-info"},d={class:"chat-username"},m={class:"van-ellipsis username"},p={class:"chat-message"},b={key:0,class:"reply-content"},h={class:"top"},f={class:"bottom"},v=["innerHTML"],O={class:"chat-time"},j={class:"block"},g={class:"tip"},k={key:0,class:"tip mt-10"};function y(e,t,i,r,y,$){var C,w,_,V,N,S=Object(n["resolveComponent"])("van-image"),x=Object(n["resolveComponent"])("van-loading"),D=Object(n["resolveComponent"])("van-count-down"),I=Object(n["resolveComponent"])("van-grid-item"),M=Object(n["resolveComponent"])("van-grid"),B=Object(n["resolveComponent"])("el-popover"),E=Object(n["resolveComponent"])("Mute"),P=Object(n["resolveComponent"])("Kick"),T=Object(n["resolveComponent"])("draw"),R=Object(n["resolveDirective"])("click-outside");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[i.showDate?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",c,Object(n["toDisplayString"])($.formatCalendar($.item.created_time)),1)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("li",{class:Object(n["normalizeClass"])(["chat-item",{right:$.isUser($.item),left:!$.isUser($.item)}])},[Object(n["createElementVNode"])("div",a,[$.item.user_image?(Object(n["openBlock"])(),Object(n["createBlock"])(S,{key:0,class:"chat-avatar",round:"",width:"0.8rem",height:"0.8rem","icon-size":"0.8rem","lazy-load":"","show-loading":"",src:$.isUser($.item)&&(null===(C=e.$store.state.chat)||void 0===C||null===(w=C.userInfo)||void 0===w?void 0:w.image)||$.item.user_image,onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(t){return $.isUser($.item)&&e.$router.push({name:"UserInfo"})}),["stop"]))},null,8,["src"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:"chat-avatar",style:Object(n["normalizeStyle"])({backgroundColor:"#"+$.item.user_address.slice(-6),color:$.avatarColor($.item)}),onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(t){return $.isUser($.item)&&e.$router.push({name:"UserInfo"})}),["stop"]))},Object(n["toDisplayString"])($.item.user_address.slice(-2)),5)),2===$.item.member_role?(Object(n["openBlock"])(),Object(n["createElementBlock"])("svg",s,l)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",d,[$.formatRole($.item)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"role-tag",style:Object(n["normalizeStyle"])({backgroundColor:$.formatRole($.item,"color")})},Object(n["toDisplayString"])($.formatRole($.item)),5)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",m,Object(n["toDisplayString"])($.isUser($.item)?(null===(_=e.$store.state)||void 0===_||null===(V=_.chat)||void 0===V||null===(N=V.userInfo)||void 0===N?void 0:N.nickname)||$.item.user_nickname||$.item.user_address.slice(0,4)+"..."+$.item.user_address.slice(-4):$.item.user_nickname||$.item.user_address.slice(0,4)+"..."+$.item.user_address.slice(-4)),1)]),Object(n["createElementVNode"])("div",p,[i.loading?(Object(n["openBlock"])(),Object(n["createBlock"])(x,{key:0,class:"chat-status loading",color:"#1989fa",size:"0.4rem"})):i.error?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"chat-status error iconfont icon-Shapex",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(t){return e.$emit("onReSend",$.item)}),["stop"]))})):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(B,{visible:y.showPopover,"onUpdate:visible":t[11]||(t[11]=function(e){return y.showPopover=e}),title:"",placement:"bottom",width:70*$.columnNum($.item)/50+"rem","popper-class":"chat-popover","popper-options":{modifiers:[{name:"flip",options:{padding:5,fallbackPlacements:["bottom","top","right","left"]}}]}},{reference:Object(n["withCtx"])((function(){var i,c,a,s,r,l,u,d,m;return[Object(n["createElementVNode"])("div",null,[1==$.item.type?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"chat-text-content",onClick:t[5]||(t[5]=Object(n["withModifiers"])((function(e){return y.showPopover=!y.showPopover}),["stop"])),onContextmenu:t[6]||(t[6]=Object(n["withModifiers"])((function(){}),["prevent"])),onTouchstartPassive:t[7]||(t[7]=function(e){return $.longTap($.item)}),onTouchmovePassive:t[8]||(t[8]=function(){return $.clearTouch&&$.clearTouch.apply($,arguments)}),onTouchendPassive:t[9]||(t[9]=function(){return $.clearTouch&&$.clearTouch.apply($,arguments)})},[$.item.to_msg?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createElementVNode"])("div",h,Object(n["toDisplayString"])($.item.to_msg.user_nickname||((null===(i=$.item.to_msg)||void 0===i||null===(c=i.user_address)||void 0===c||null===(a=c.slice)||void 0===a?void 0:a.call(c,0,4))||"")+"..."+((null===(s=$.item.to_msg)||void 0===s||null===(r=s.user_address)||void 0===r||null===(l=r.slice)||void 0===l?void 0:l.call(r,-4))||"")),1),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("span",{class:Object(n["normalizeClass"])(["van-ellipsis",{pre:y.expand||(null===(u=$.item.to_msg)||void 0===u?void 0:u.content.length)<=60}]),style:{flex:"1"}},Object(n["toDisplayString"])((null===(d=$.item.to_msg)||void 0===d?void 0:d.content)||""),3),(null===(m=$.item.to_msg)||void 0===m?void 0:m.content.length)>60?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[y.expand?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"expand",onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(e){return y.expand=!1}),["stop"]))},Object(n["toDisplayString"])(e.$t("collapse")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"expand",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(e){return y.expand=!0}),["stop"]))},Object(n["toDisplayString"])(e.$t("expand")),1))],64)):Object(n["createCommentVNode"])("",!0)])])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("span",{innerHTML:$.item.content,style:{"line-height":"1.5"}},null,8,v),Object(n["createElementVNode"])("div",O,Object(n["toDisplayString"])(e.$f.formatDate($.item.created_time,"HH:mm")),1)],32)),[[R,$.close]]):Object(n["createCommentVNode"])("",!0),6==$.item.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:Object(n["normalizeClass"])(["chat-text-content red-packet",{end:-1==JSON.parse($.item.content).status||1==JSON.parse($.item.content).status||2==JSON.parse($.item.content).status||5==JSON.parse($.item.content).status,receive:4==JSON.parse($.item.content).status}]),onClick:t[10]||(t[10]=function(e){return $.draw($.item)})},[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("span",j,Object(n["toDisplayString"])(JSON.parse($.item.content).remark),1),Object(n["createElementVNode"])("span",g,Object(n["toDisplayString"])(e.$f.filterRedPacketStatus(JSON.parse($.item.content).status)),1),3==JSON.parse($.item.content).status||4==JSON.parse($.item.content).status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",k,[y.timeHide?(Object(n["openBlock"])(),Object(n["createBlock"])(D,{key:0,time:$.timeCountDown,onChange:$.changeCountDown},null,8,["time","onChange"])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createVNode"])(S,{class:"icon",src:o("c1f5")},null,8,["src"])],2)):Object(n["createCommentVNode"])("",!0)])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(M,{border:!1,clickable:"","column-num":$.columnNum($.item)},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])($.actions($.item),(function(e,t){return Object(n["openBlock"])(),Object(n["createBlock"])(I,{key:t,text:e.text,style:{"--van-grid-item-content-padding":"5px 10px","--van-grid-item-content-background-color":"transparent"},onClick:function(o){return $.onSelect($.item,t,e)}},{icon:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])("iconfont icon-".concat(e.icon)),style:{"font-size":"0.4rem"}},null,2)]})),_:2},1032,["text","onClick"])})),128))]})),_:1},8,["column-num"])]})),_:1},8,["visible","width"])])])],2),Object(n["createVNode"])(E,{ref:"mute",visible:y.visible,"onUpdate:visible":t[12]||(t[12]=function(e){return y.visible=e}),onOnSubmit:$.mute},null,8,["visible","onOnSubmit"]),Object(n["createVNode"])(P,{ref:"kick",visible:y.visible1,"onUpdate:visible":t[13]||(t[13]=function(e){return y.visible1=e}),onOnSubmit:$.kick},null,8,["visible","onOnSubmit"]),Object(n["createVNode"])(T,{ref:"ref_draw",onOnModifyChatGroupHistoryMsg:$.onModifyChatGroupHistoryMsg},null,8,["onOnModifyChatGroupHistoryMsg"])],64)}var $=o("2909"),C=(o("a9e3"),o("99af"),o("2ca0"),o("d3b7"),o("365c")),w=o("fa7d"),_=o("b04f"),V={class:"popup-title"},N={class:"form-submit"};function S(e,t,o,i,c,a){var s=Object(n["resolveComponent"])("van-radio"),r=Object(n["resolveComponent"])("van-radio-group"),l=Object(n["resolveComponent"])("van-button"),u=Object(n["resolveComponent"])("van-form"),d=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{show:a.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return a.dialogVisible=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",V,Object(n["toDisplayString"])(e.$t("kickOutChat")),1),Object(n["createVNode"])(u,{class:"popup-content",onSubmit:a.confirmSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(r,{modelValue:c.checked,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.checked=e})},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{class:"mb_10",name:1},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("kickOutTheChat")),1)]})),_:1}),a.role>1?(Object(n["openBlock"])(),Object(n["createBlock"])(s,{key:0,class:"mb_10",name:2},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("kickOutAllChat")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]})),_:1},8,["modelValue"]),Object(n["createElementVNode"])("div",N,[Object(n["createVNode"])(l,{class:"btn",round:"",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(e){return a.dialogVisible=!1}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("cancel")),1)]})),_:1}),Object(n["createVNode"])(l,{class:"btn",round:"","native-type":"submit",type:"primary",loading:c.loading},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm1")),1)]})),_:1},8,["loading"])])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var x={name:"Mute",props:{visible:Boolean},emits:["update:visible","onSubmit"],data:function(){return{time:"",checked:1,loading:!1,placeholder:this.$t("pSelectBanExpirationTime"),showPicker:!1,minDate:new Date}},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},role:function(){if(""===this.$store.state.chat.groupMemberInfo.role||""===this.$store.state.chat.groupMemberInfo.user_role)return"";var e=2===this.$store.state.chat.groupMemberInfo.role?1.5:this.$store.state.chat.groupMemberInfo.role,t=Math.max(e,this.$store.state.chat.groupMemberInfo.user_role);return t}},watch:{},methods:{confirmSubmit:function(){this.$emit("onSubmit",this.checked)}}},D=(o("da9c"),o("6b0d")),I=o.n(D);const M=I()(x,[["render",S],["__scopeId","data-v-27422fd0"]]);var B=M,E={class:"red-packet"},P={class:"wrapper"},T={style:{width:"100%",position:"relative"}},R={class:"packet"},U={ref:"slide",class:"slide"},F={class:"info"},H={class:"color-FFDA71 mt-25 block"},z={class:"font-22 color-FFDA71 mt-18 block"},J={class:"tip"},A={class:"success",ref:"success"},G={class:"color-333 font-16 block mt-25"},L={class:"color-FF3C3C font-22 block mt-25"},Y={class:"color-333 block mt_5 flex"},K={class:"padding-15"},q={class:"color-fff font-12 mt-10"},W={class:"tip",style:{"margin-bottom":"74px"}},Q={ref:"slide",class:"slide transition"},X={class:"relative"},Z={class:"color-FFDA71 mt-55 block"},ee={class:"font-22 color-FFDA71 mt-120 block"},te={class:"bottom"};function oe(e,t,i,c,a,s){var r=Object(n["resolveComponent"])("van-icon"),l=Object(n["resolveComponent"])("van-image"),u=Object(n["resolveComponent"])("van-button"),d=Object(n["resolveComponent"])("van-overlay"),m=Object(n["resolveComponent"])("RedPacketValidateDialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",E,[Object(n["createVNode"])(d,{show:a.show,onClick:t[5]||(t[5]=function(e){return a.show=!1})},{default:Object(n["withCtx"])((function(){var i,c,d,m,p,b,h,f,v,O,j,g;return[Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",T,[Object(n["createVNode"])(r,{class:"icon",name:"close",onClick:t[0]||(t[0]=function(e){return a.show=!1}),style:{position:"absolute"}}),Object(n["createElementVNode"])("div",{class:"flex",onClick:t[4]||(t[4]=Object(n["withModifiers"])((function(){}),["stop"])),style:{"justify-content":"center",width:"100%"}},[Object(n["createElementVNode"])("div",R,[Object(n["withDirectives"])(Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",U,null,512),Object(n["createElementVNode"])("button",{class:"play",ref:"ref_play",onClick:t[1]||(t[1]=function(){return s.clickOpen&&s.clickOpen.apply(s,arguments)})},["en"===s.language?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,round:"",width:"80px",height:"80px","icon-size":"80px","lazy-load":"","show-loading":"",src:o("7a7c")},null,8,["src"])):(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:1,round:"",width:"80px",height:"80px","icon-size":"80px","lazy-load":"","show-loading":"",src:o("7121")},null,8,["src"]))],512),Object(n["createElementVNode"])("div",F,[Object(n["createElementVNode"])("span",H,Object(n["toDisplayString"])(e.$t("whoSend",{user:a.user_nickname||((null===(i=a.redPacket)||void 0===i||null===(c=i.creator_address)||void 0===c||null===(d=c.slice)||void 0===d?void 0:d.call(c,0,4))||"")+"..."+((null===(m=a.redPacket)||void 0===m||null===(p=m.creator_address)||void 0===p||null===(b=p.slice)||void 0===b?void 0:b.call(p,-4))||"")})),1),Object(n["createElementVNode"])("span",z,Object(n["toDisplayString"])(a.redPacket.remark),1)])],512),[[n["vShow"],3==a.status]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",J,[Object(n["createElementVNode"])("div",A,[Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({"background-image":"url("+o("e23c")+")"})},[Object(n["createElementVNode"])("span",G,Object(n["toDisplayString"])(e.$t("congratulations1")),1),Object(n["createElementVNode"])("span",L,Object(n["toDisplayString"])(e.$f.formatNumber2(a.receive_result.amount)||0)+Object(n["toDisplayString"])(e.$t("per")),1),Object(n["createElementVNode"])("div",Y,[Object(n["createVNode"])(l,{round:"",width:"18px",height:"18px","icon-size":"18px","lazy-load":"","show-loading":"",class:"icon-left",src:e.$f.formatIcon("".concat(a.receive_result.contract_address,"-").concat(a.receive_result.contract_chain)),"error-icon":o("aecc")},null,8,["src","error-icon"]),Object(n["createTextVNode"])("Â  "+Object(n["toDisplayString"])(a.receive_result.contract_symbol||"--"),1)])],4)],512),Object(n["createElementVNode"])("div",K,[Object(n["createElementVNode"])("span",q,"*"+Object(n["toDisplayString"])(e.$t("tipDraw")),1),Object(n["createVNode"])(u,{class:"mt-10",round:"",color:"#FFDA71",style:{width:"100%",color:"#dd3b3b"},onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return a.show=!1}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("iKnown")),1)]})),_:1})])],512),[[n["vShow"],8==a.status]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",W,[Object(n["createElementVNode"])("div",Q,null,512),Object(n["createElementVNode"])("div",X,[Object(n["createElementVNode"])("span",Z,Object(n["toDisplayString"])(e.$t("whoSend",{user:a.user_nickname||((null===(h=a.redPacket)||void 0===h||null===(f=h.creator_address)||void 0===f||null===(v=f.slice)||void 0===v?void 0:v.call(f,0,4))||"")+"..."+((null===(O=a.redPacket)||void 0===O||null===(j=O.creator_address)||void 0===j||null===(g=j.slice)||void 0===g?void 0:g.call(j,-4))||"")})),1),Object(n["createElementVNode"])("span",ee,Object(n["toDisplayString"])(e.$f.filterRedPacketStatus(a.status)),1)])],512),[[n["vShow"],-1==a.status||1==a.status||4==a.status||5==a.status]]),Object(n["createElementVNode"])("div",te,[Object(n["createElementVNode"])("a",{href:"",onClick:t[3]||(t[3]=Object(n["withModifiers"])((function(){return s.jump&&s.jump.apply(s,arguments)}),["stop","prevent"]))},Object(n["toDisplayString"])(e.$t("seeLuck"))+">",1)])])])])])]})),_:1},8,["show"]),Object(n["createVNode"])(m,{ref:"redValid",visible:a.validateVisible,"onUpdate:visible":t[6]||(t[6]=function(e){return a.validateVisible=e}),onOnSubmit:s.openRedPacket},null,8,["visible","onOnSubmit"])])}var ne=o("1da1"),ie=(o("96cf"),{class:"popup-title"}),ce={class:"captchaCode"},ae=["src"],se=["disabled"],re={class:"footer"};function le(e,t,o,i,c,a){var s=Object(n["resolveComponent"])("van-field"),r=Object(n["resolveComponent"])("van-button"),l=Object(n["resolveComponent"])("van-form"),u=Object(n["resolveComponent"])("van-popup");return Object(n["openBlock"])(),Object(n["createBlock"])(u,{show:a.dialogVisible,"onUpdate:show":t[2]||(t[2]=function(e){return a.dialogVisible=e}),class:"popup-container",closeable:!1,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"auto"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h3",ie,Object(n["toDisplayString"])(e.$t("securityVerification")),1),Object(n["createVNode"])(l,{class:"popup-content",ref:"formRef",onSubmit:a.onSubmit},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",ce,[Object(n["createElementVNode"])("img",{class:"image-captchaCode",src:c.captchaCode.image,alt:"",srcset:""},null,8,ae),Object(n["createElementVNode"])("button",{class:"btn-text",type:"button",disabled:c.disabled,onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return a.getCaptcha&&a.getCaptcha.apply(a,arguments)}),["stop","prevent"]))},Object(n["toDisplayString"])(e.$t("refreshCode")),9,se)]),Object(n["createVNode"])(s,{modelValue:c.form.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.form.value=e}),modelModifiers:{trim:!0},placeholder:e.$t("enterCalculation"),clearable:"",rules:a.rules},null,8,["modelValue","placeholder","rules"]),Object(n["createElementVNode"])("div",re,[Object(n["createVNode"])(r,{class:"btn","native-type":"submit",loading:c.loading,disabled:c.disabled,type:"primary",block:""},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("verify")),1)]})),_:1},8,["loading","disabled"])])]})),_:1},8,["onSubmit"])]})),_:1},8,["show"])}var ue={name:"ValidateDialog",props:{visible:Boolean},emits:["update:visible","onSubmit"],data:function(){return{form:{value:""},captchaCode:{captcha_id:"",image:""},loading:!1,disabled:!1}},computed:{rules:function(){return[{required:!0,message:this.$t("enterCalculation"),trigger:"blur"}]},dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},watch:{visible:function(e){e&&this.reset()}},created:function(){this.reset()},methods:{reset:function(){var e,t,o;this.visible&&(this.form.value="",null===(e=this.$refs)||void 0===e||null===(t=e.formRef)||void 0===t||null===(o=t.resetValidation)||void 0===o||o.call(t),this.getCaptcha())},onSubmit:function(){this.$emit("onSubmit",{captcha_id:this.captchaCode.captcha_id,captcha_value:this.form.value})},getCaptcha:function(){var e=this;this.disabled=!0,Object(C["tb"])().then((function(t){e.captchaCode=t})).catch((function(t){t&&"string"===typeof t&&e.$toast({message:t,position:"top"})})).finally((function(){e.disabled=!1}))}}};o("98ca");const de=I()(ue,[["render",le],["__scopeId","data-v-6ced939b"]]);var me=de,pe={name:"RedDraw",components:{RedPacketValidateDialog:me},emits:["onModifyChatGroupHistoryMsg"],data:function(){return{show:!1,packetId:0,groupId:0,status:0,receive_result:{},redPacket:{},user_nickname:"",id:0,validateVisible:!1}},computed:{language:function(){return this.$store.getters.language}},methods:{init:function(e){var t=this;return Object(ne["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(t.id=e.id,t.redPacket=JSON.parse(e.content),t.user_nickname=e.user_nickname,t.packetId=JSON.parse(e.content).id,t.groupId=e.group_id,t.status=t.redPacket.status,2!=t.status&&3!=t.status){o.next=9;break}return o.next=9,t.viewDetailRedPacket();case 9:t.show=!0;case 10:case"end":return o.stop()}}),o)})))()},clickOpen:function(){this.validateVisible=!0},openRedPacket:function(e){var t=this,o=e.captcha_id,n=e.captcha_value;this.validateVisible=!1,this.$refs.ref_play.style["animation-duration"]="1s",setTimeout((function(){t.receiveRedPacket(t.id,o,n)}),1e3)},receiveRedPacket:function(e,t,o){var n=this,i={group_id:this.groupId,packet_id:this.packetId,captcha_id:t,captcha_value:o};Object(C["dc"])(i).then((function(t){t.receive_status>0?(n.status=8,n.$emit("onModifyChatGroupHistoryMsg",e,{status:4}),n.receive_result=t.receive_result):n.status=t.status})).catch((function(e){n.$toast(e||n.$t("receiveFailed")),n.show=!1,console.log(e)})).finally((function(){n.$refs.ref_play.style["animation-duration"]="0s"}))},viewDetailRedPacket:function(){var e=this,t={groupId:this.groupId,redPacketId:this.packetId},o=this.$toast.loading({message:"Loading...",forbidClick:!0,duration:0});return new Promise((function(n,i){Object(C["Dc"])(t).then((function(t){e.status=null===t||void 0===t?void 0:t.status,e.$emit("onModifyChatGroupHistoryMsg",e.id,{status:e.status}),n(!0)})).catch((function(t){e.$notify({type:"danger",message:"View Failed"}),console.log(t),i(!1)})).finally((function(){o.clear()}))}))},jump:function(){this.$router.push("/chat/".concat(this.groupId,"/redRecord?packetId=").concat(this.packetId)),this.show=!1}}};o("c06c");const be=I()(pe,[["render",oe],["__scopeId","data-v-e7eaa462"]]);var he=be,fe=o("15ef"),ve=(o("7750"),{name:"ChatItem",components:{Mute:_["a"],Kick:B,ElPopover:fe["a"],Draw:he},props:{index:{type:Number},source:{type:Object,default:function(){return{}}},loading:{type:Boolean},error:{type:Boolean},listLoading:{type:Boolean},showDate:{type:Boolean},isTop:{type:Boolean,default:!1}},emits:["onRemove","onRemoveUser","onReply","onReSend","onUnpin","onRefreshPin","onLogin","onModifyChatGroupHistoryMsg"],data:function(){return{timer:null,showPopover:!1,visible:!1,visible1:!1,curItem:{},expand:!1,redPacketMsg:{},timeHide:!0}},computed:{item:function(){return this.source},chatToken:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.chat)||void 0===t?void 0:t.chatToken)||""},role:function(){if(""===this.$store.state.chat.groupMemberInfo.role||""===this.$store.state.chat.groupMemberInfo.user_role)return"";var e=2===this.$store.state.chat.groupMemberInfo.role?1.5:this.$store.state.chat.groupMemberInfo.role,t=Math.max(e,this.$store.state.chat.groupMemberInfo.user_role);return t},groupId:function(){return this.$store.state.chat.groupId},groupInfo:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.chat)||void 0===t?void 0:t.groupInfo)||{id:"",name:"",nickname:""}},groupMemberInfo:function(){var e,t;return(null===(e=this.$store.state)||void 0===e||null===(t=e.chat)||void 0===t?void 0:t.groupMemberInfo)||{}},timeCountDown:function(){var e=0;if(6==this.item.type){var t=JSON.parse(this.item.content);1e3*((null===t||void 0===t?void 0:t.created_time)+(null===t||void 0===t?void 0:t.end_time))-(new Date).getTime()>0&&(e=1e3*((null===t||void 0===t?void 0:t.created_time)+(null===t||void 0===t?void 0:t.end_time))-(new Date).getTime())}return e}},methods:{actions:function(e){var t,o,n,i,c=(1===this.role||1.5===this.role)&&1===e.is_pined;if(this.isTop)return[{text:this.$t("copy"),id:"copy",icon:"copy-o"}].concat(Object($["a"])(c?[{text:this.$t("unpin"),id:"unpin",icon:"top"}]:[]));var a=(null===(t=this.$store.state)||void 0===t||null===(o=t.chat)||void 0===o||null===(n=o.groupMemberInfo)||void 0===n?void 0:n.group_id)&&this.chatToken&&(this.role>0||e.user_address===this.$store.state.chat.userInfo.address&&e.user_chain===this.$store.state.chat.userInfo.chain),s=!(0===this.role||this.role<=e.role||this.role<=e.user_role),r=this.chatToken&&(0===this.groupMemberInfo.status&&(0===this.groupInfo.status||3===this.groupInfo.status)&&0===(null===(i=this.$store.state.chat)||void 0===i?void 0:i.userInfo.status)||this.role>1),l=(1===this.role||1.5===this.role)&&0===e.is_pined;return[{text:this.$t("copy"),id:"copy",icon:"copy-o"}].concat(Object($["a"])(r?[{text:this.$t("reply"),id:"reply",icon:"reply"}]:[]),Object($["a"])(a?[{text:this.$t("delete"),id:"delete",icon:"delete"}]:[]),Object($["a"])(s?[{text:this.$t("ban"),id:"ban",icon:"ban"},{text:this.$t("remove"),id:"kick",icon:"kick"}]:[]),Object($["a"])(l?[{text:this.$t("pin"),id:"top",icon:"top"}]:[]),Object($["a"])(c?[{text:this.$t("unpin"),id:"unpin",icon:"top"}]:[]))},columnNum:function(e){return Math.min(4,this.actions(e).length)},longTap:function(){var e=this;this.loading||this.listLoading||(clearTimeout(this.timer),this.timer=setTimeout((function(){e.timer=null,e.showPopover=!0}),500))},clearTouch:function(){this.timer&&clearTimeout(this.timer)},close:function(){this.showPopover=!1},onSelect:function(e,t,o){var n=this;"delete"===o.id?this.$dialog.confirm({message:this.$t("confirmDeleteMessage"),confirmButtonText:this.$t("delete"),cancelButtonText:this.$t("cancel")}).then((function(){var t,o;null!==(t=String(null===e||void 0===e?void 0:e.id))&&void 0!==t&&null!==(o=t.startsWith)&&void 0!==o&&o.call(t,"send-")?n.$emit("onRemove"):(n.$toast.loading({forbidClick:!1,duration:0}),Object(C["hc"])(e.id).then((function(e){console.log(e),n.$emit("onRemove")})).catch((function(e){console.log(e),n.$toast({message:e,position:"top"})})))})).catch((function(){})):"copy"===o.id?Object(w["b"])(e.content):"ban"===o.id?(this.curItem=e,this.visible=!0):"kick"===o.id?(this.curItem=e,this.visible1=!0):"reply"===o.id?this.$emit("onReply",e):"top"===o.id?this.pinMsg(e):"unpin"===o.id&&this.unpinMsg(e)},mute:function(e){var t=this;this.$refs.mute.loading=!0;var o=this.curItem;Object(C["xc"])(this.groupId,o.user_address,o.user_chain,e.user_status,e.banned_expired).then((function(e){e&&(t.$toast.success(t.$t("bannedSuccessfully")),t.visible=!1)})).catch((function(e){console.log(e),t.$toast.fail(e)})).finally((function(){t.$refs.mute.loading=!1}))},kick:function(e){var t=this;if(1===e){this.$refs.kick.loading=!0;var o=this.curItem,n={group_id:this.groupId,user_address:o.user_address,user_chain:o.user_chain};Object(C["gc"])(n).then((function(e){var o,i;e&&(null!==(o=t.$refs)&&void 0!==o&&null!==(i=o.kick)&&void 0!==i&&i.loading&&(t.$refs.kick.loading=!1),t.visible1=!1,t.$emit("onRemoveUser",n))})).catch((function(e){var o,n;null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),console.log(e),t.$toast.fail(e)}))}else if(2===e){this.$refs.kick.loading=!0;var i=this.curItem,c={user_address:i.user_address,user_chain:i.user_chain};Object(C["lc"])(c).then((function(e){var o,n;e&&(null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),t.visible1=!1,t.$emit("onRemoveUser",c))})).catch((function(e){var o,n;console.log(e),null!==(o=t.$refs)&&void 0!==o&&null!==(n=o.kick)&&void 0!==n&&n.loading&&(t.$refs.kick.loading=!1),t.$toast.fail(e)}))}},pinMsg:function(e){var t=this;this.$toast.loading({forbidClick:!1,duration:0}),Object(C["cc"])(e.id).then((function(e){console.log(e),t.$toast({message:t.$t("pinSuccess"),position:"top"}),t.$emit("onRefreshPin")})).catch((function(e){console.log(e),t.$toast({message:e,position:"top"})}))},unpinMsg:function(e){var t=this;this.$dialog.confirm({message:this.$t("confirmUnpinMsg"),confirmButtonText:this.$t("confirm"),cancelButtonText:this.$t("cancel")}).then((function(){t.$toast.loading({forbidClick:!1,duration:0}),Object(C["uc"])(e.id).then((function(o){console.log(o),t.$toast({message:t.$t("unpinSuccess"),position:"top"}),t.$emit("onUnpin",e),t.$emit("onRefreshPin")})).catch((function(e){console.log(e),t.$toast({message:e,position:"top"})}))})).catch((function(){}))},avatarColor:function(e){var t=e.user_address.slice(-6),o=.2126*Number("0x"+t.slice(0,2)),n=.7152*Number("0x"+t.slice(2,4)),i=.0722*Number("0x"+t.slice(4,6)),c=o+n+i,a=c/255,s="hsl(0, 0%, ".concat(-999999*(a-.6),"%");return s},isUser:function(e){var t,o,n,i,c,a;return e.user_address===(null===(t=this.$store.state)||void 0===t||null===(o=t.chat)||void 0===o||null===(n=o.userInfo)||void 0===n?void 0:n.address)&&e.user_chain===(null===(i=this.$store.state)||void 0===i||null===(c=i.chat)||void 0===c||null===(a=c.userInfo)||void 0===a?void 0:a.chain)},formatCalendar:function(e){var t=this.$dayjs(1e3*e).isToday();if(t)return this.$dayjs(1e3*e).format("HH:mm");var o=this.$dayjs(1e3*e).isYesterday();return o?this.$t("yesterday")+" "+this.$dayjs(1e3*e).format("HH:mm"):this.$dayjs(1e3*e).format("YYYY-MM-DD")},formatRole:function(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=2===e.member_role?1.5:e.member_role,i=Math.max(n,e.user_role),c={0:{name:"",role:0,color:"#1FD0A3"},1:{name:this.$t("admin"),role:1,color:"#1FD0A3"},1.5:{name:this.$t("projectParty"),role:1.5,color:"#3F80F7"},2:{name:this.$t("inspector"),role:2,color:"#FFC800"},3:{name:this.$t("superAdmin"),role:3,color:"#1FD0A3"}};return(null===c||void 0===c||null===(t=c[i])||void 0===t?void 0:t[o])||""},draw:function(e){var t,o,n,i;this.$store.getters.netId===(null===(t=this.$store.state.chat)||void 0===t?void 0:t.userInfo.chain)||""===(null===(o=this.$store.state.chat)||void 0===o?void 0:o.userInfo.chain)?null!==(n=this.groupMemberInfo)&&void 0!==n&&n.group_id&&1!==(null===(i=this.groupMemberInfo)||void 0===i?void 0:i.is_leave)?""===this.$store.state.chat.userInfo.address?this.$emit("onLogin"):3!=JSON.parse(e.content).status?this.$router.push("/chat/".concat(this.groupId,"/redRecord?packetId=").concat(JSON.parse(e.content).id)):this.$refs.ref_draw.init(e):this.$toast(this.$t("tipJoin")):this.$toast(this.$t("tipSwitchChain",{chain:"BSC"}))},onModifyChatGroupHistoryMsg:function(e,t){this.$emit("onModifyChatGroupHistoryMsg",e,t)},viewDetailRedPacket:function(e){var t=this,o={groupId:this.groupId,redPacketId:JSON.parse(e.content).id};return new Promise((function(n,i){Object(C["Dc"])(o).then((function(o){console.log("details",o),t.onModifyChatGroupHistoryMsg(e.id,{status:null===o||void 0===o?void 0:o.status}),n(!0)})).catch((function(e){console.log(e),i(!1)})).finally((function(){}))}))},changeCountDown:function(e){e&&0===(null===e||void 0===e?void 0:e.days)&&0===(null===e||void 0===e?void 0:e.hours)&&0===(null===e||void 0===e?void 0:e.minutes)&&0===(null===e||void 0===e?void 0:e.seconds)&&(this.timeHide=!1,this.viewDetailRedPacket(this.item))}}});o("69e9");const Oe=I()(ve,[["render",y],["__scopeId","data-v-672acc00"]]);t["a"]=Oe},e0a6:function(e,t,o){},e23c:function(e,t,o){e.exports=o.p+"static/img/drawBg.eaaa75d7.svg"}}]);